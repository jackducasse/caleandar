var Calendar=function(e,t,n){for(var a in this.Options={Color:"",LinkColor:"",NavShow:!0,NavShowYear:!0,NavVertical:!1,NavLocation:"",DateTimeShow:!0,DatetimeLocation:"",EventClick:"",RemoveAnchorHrefIfEventClickGiven:!1,EventTargetWholeDay:!1,DisabledDays:[],ModelChange:e,MinDateMonth:new Date(1900,0,1),MaxDateMonth:new Date(2050,0,1),HideHover:!1,MakeEachCellAnchor:!1},t)this.Options[a]="string"==typeof t[a]?t[a].toLowerCase():t[a];this.Model=e||{},this.Today=new Date,this.Selected=this.Today,this.Today.Month=this.Today.getMonth(),this.Today.Year=this.Today.getFullYear(),n&&(this.Selected=n),this.Selected.Month=this.Selected.getMonth(),this.Selected.Year=this.Selected.getFullYear(),this.Selected.Days=new Date(this.Selected.Year,this.Selected.Month+1,0).getDate(),this.Selected.FirstDay=new Date(this.Selected.Year,this.Selected.Month,1).getDay(),this.Selected.LastDay=new Date(this.Selected.Year,this.Selected.Month+1,0).getDay(),this.Prev=new Date(this.Selected.Year,this.Selected.Month-1,1),0==this.Selected.Month&&(this.Prev=new Date(this.Selected.Year-1,11,1)),this.Prev.Days=new Date(this.Prev.getFullYear(),this.Prev.getMonth()+1,0).getDate()};function createCalendar(e,t,n){if("number"==typeof n)var a=new Date(e.Selected.Year,e.Selected.Month+n,1);else if(n instanceof Date)a=new Date(n.valueOf());if(void 0!==n)e=a<=e.Options.MaxDateMonth&&a>=e.Options.MinDateMonth?new Calendar(e.Model,e.Options,a):new Calendar(e.Model,e.Options,e.Selected),t.innerHTML="";else for(var l in e.Options)"function"!=typeof e.Options[l]&&"object"!=typeof e.Options[l]&&e.Options[l]&&(t.className+=" "+l+"-"+e.Options[l]);var i=["January","February","March","April","May","June","July","August","September","October","November","December"];var o=document.createElement("div");o.className+="cld-main",e.Options.Color&&(o.innerHTML+="<style>.cld-main{color:"+e.Options.Color+";}</style>"),e.Options.LinkColor&&(o.innerHTML+="<style>.cld-title a{color:"+e.Options.LinkColor+";}</style>"),t.appendChild(o),e.Options.NavShow&&e.Options.NavVertical&&function(){var n=document.createElement("div");n.className+="cld-sidebar";var a=document.createElement("ul");a.className+="cld-monthList";for(var l=0;l<i.length-3;l++){var o=document.createElement("li");o.className+="cld-month";var d=l-(4-e.Selected.Month);if(d<0?d+=12:d>11&&(d-=12),0==l)o.className+=" cld-rwd cld-nav",o.addEventListener("click",function(){"function"==typeof e.Options.ModelChange?e.Model=e.Options.ModelChange():e.Model=e.Options.ModelChange,createCalendar(e,t,-1)}),o.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,75 100,75 50,0"></polyline></svg>';else if(l==i.length-4)o.className+=" cld-fwd cld-nav",o.addEventListener("click",function(){"function"==typeof e.Options.ModelChange?e.Model=e.Options.ModelChange():e.Model=e.Options.ModelChange,createCalendar(e,t,1)}),o.innerHTML+='<svg height="15" width="15" viewBox="0 0 100 75" fill="rgba(255,255,255,0.5)"><polyline points="0,0 100,0 50,75"></polyline></svg>';else if(o.className+=l<4?" cld-pre":l>4?" cld-post":" cld-curr",function(){var n=l-4;o.addEventListener("click",function(){"function"==typeof e.Options.ModelChange?e.Model=e.Options.ModelChange():e.Model=e.Options.ModelChange,createCalendar(e,t,n)}),o.setAttribute("style","opacity:"+(1-Math.abs(n)/4)),o.innerHTML+=i[d].substr(0,3)}(),0==d){var c=document.createElement("li");c.className+="cld-year",c.innerHTML+=l<5?e.Selected.Year:e.Selected.Year+1,a.appendChild(c)}a.appendChild(o)}n.appendChild(a),e.Options.NavLocation?(document.getElementById(e.Options.NavLocation).innerHTML="",document.getElementById(e.Options.NavLocation).appendChild(n)):t.appendChild(n)}(),e.Options.DateTimeShow&&function(){var n=document.createElement("div");if(n.className+="cld-datetime",e.Options.NavShow&&!e.Options.NavVertical){if(e.Options.NavShowYear){var a=document.createElement("div");a.className+=" cld-rwd-year cld-rwd cld-nav",a.addEventListener("click",function(){createCalendar(e,t,-12)}),a.innerHTML='<svg height="15" width="15" viewBox="0 0 120 100" fill="rgba(0,0,0,0.5)"><polyline points="60,0 0,50 60,100"></polyline><polyline points="120,0 60,50 120,100"></polyline></svg>',n.appendChild(a)}var l=document.createElement("div");l.className+=" cld-rwd cld-nav",l.addEventListener("click",function(){createCalendar(e,t,-1)}),l.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,50 75,0 75,100"></polyline></svg>',n.appendChild(l)}var d=document.createElement("div");if(d.className+=" today",d.innerHTML=i[e.Selected.Month]+", "+e.Selected.Year,n.appendChild(d),e.Options.NavShow&&!e.Options.NavVertical){var c=document.createElement("div");if(c.className+=" cld-fwd cld-nav",c.addEventListener("click",function(){createCalendar(e,t,1)}),c.innerHTML='<svg height="15" width="15" viewBox="0 0 75 100" fill="rgba(0,0,0,0.5)"><polyline points="0,0 75,50 0,100"></polyline></svg>',n.appendChild(c),e.Options.NavShowYear){var s=document.createElement("div");s.className+=" cld-fwd-year cld-fwd cld-nav",s.addEventListener("click",function(){createCalendar(e,t,12)}),s.innerHTML='<svg height="15" width="15" viewBox="0 0 120 100" fill="rgba(0,0,0,0.5)"><polyline points="0,0 60,50 0,100"></polyline><polyline points="60,0 120,50 60,100"></polyline></svg>',n.appendChild(s)}}e.Options.DatetimeLocation?(document.getElementById(e.Options.DatetimeLocation).innerHTML="",document.getElementById(e.Options.DatetimeLocation).appendChild(n)):o.appendChild(n)}(),function(){var e=document.createElement("ul");e.className="cld-labels";for(var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=0;n<t.length;n++){var a=document.createElement("li");a.className+="cld-label",a.innerHTML=t[n],e.appendChild(a)}o.appendChild(e)}(),function(){function t(e){var t=document.createElement("p");return t.className+="cld-number",t.innerHTML+=e,t}if(e.Options.MakeEachCellAnchor)var n=document.createElement("div"),a="a";else n=document.createElement("ul"),a="li";n.className+="cld-days";for(var l=0;l<e.Selected.FirstDay;l++){(M=document.createElement(a)).className+="cld-day prevMonth";for(var i=l%7,d=0;d<e.Options.DisabledDays.length;d++)i==e.Options.DisabledDays[d]&&(M.className+=" disableDay");var c=t(e.Prev.Days-e.Selected.FirstDay+(l+1));M.appendChild(c),n.appendChild(M)}for(l=0;l<e.Selected.Days;l++){for((M=document.createElement(a)).className+="cld-day currMonth",i=(l+e.Selected.FirstDay)%7,d=0;d<e.Options.DisabledDays.length;d++)i==e.Options.DisabledDays[d]&&(M.className+=" disableDay");c=t(l+1);for(var s=0;s<e.Model.length;s++){var r=e.Model[s].Date,p=new Date(e.Selected.Year,e.Selected.Month,l+1);if(r.getTime()==p.getTime()){c.className+=" eventday";var h=document.createElement("span");if(h.className+="cld-title",e.Options.MakeEachCellAnchor&&M.setAttribute("href",e.Model[s].Link),e.Options.HideHover&&(h.style.display="none"),"function"==typeof e.Model[s].Link||e.Options.EventClick){var v=document.createElement("a");if(e.Options.RemoveAnchorHrefIfEventClickGiven?v.setAttribute("href","#"):v.setAttribute("href",e.Model[s].Link),v.innerHTML+=e.Model[s].Title,e.Options.EventClick){var m=e.Model[s].Link;"string"!=typeof e.Model[s].Link?(v.addEventListener("click",e.Options.EventClick.bind.apply(e.Options.EventClick,[null].concat(m))),e.Options.EventTargetWholeDay&&(M.className+=" clickable",M.addEventListener("click",e.Options.EventClick.bind.apply(e.Options.EventClick,[null].concat(m))))):(v.addEventListener("click",e.Options.EventClick.bind(null,m)),e.Options.EventTargetWholeDay&&(M.className+=" clickable",M.addEventListener("click",e.Options.EventClick.bind(null,m))))}else v.addEventListener("click",e.Model[s].Link),e.Options.EventTargetWholeDay&&(M.className+=" clickable",M.addEventListener("click",e.Model[s].Link));h.appendChild(v)}else h.innerHTML+='<a href="'+e.Model[s].Link+'">'+e.Model[s].Title+"</a>";c.appendChild(h)}}M.appendChild(c),l+1==e.Today.getDate()&&e.Selected.Month==e.Today.Month&&e.Selected.Year==e.Today.Year&&(M.className+=" today"),n.appendChild(M)}var y=13;for(n.children.length>35?y=6:n.children.length<29&&(y=20),l=0;l<y-e.Selected.LastDay;l++){var M;for((M=document.createElement(a)).className+="cld-day nextMonth",i=(l+e.Selected.LastDay+1)%7,d=0;d<e.Options.DisabledDays.length;d++)i==e.Options.DisabledDays[d]&&(M.className+=" disableDay");c=t(l+1),M.appendChild(c),n.appendChild(M)}o.appendChild(n)}()}function caleandar(e,t,n){createCalendar(new Calendar(t,n),e)}